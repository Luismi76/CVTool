{% extends "base.html" %}
{% block title %}{{ title }} - CV Generator{% endblock %}
{% block content %}
<div class="container">
    <div class="header">
        <h1>üìã 
            {% if section == 'skills' %}Habilidades
            {% elif section == 'experience' %}Experiencia
            {% elif section == 'projects' %}Proyectos
            {% elif section == 'education' %}Formaci√≥n
            {% elif section == 'courses' %}Cursos
            {% elif section == 'otros' %}Otros
            {% else %}{{ title }}
            {% endif %}
        </h1>
        <p>Gestione su 
            {% if section == 'skills' %}habilidades
            {% elif section == 'experience' %}experiencia laboral
            {% elif section == 'projects' %}proyectos
            {% elif section == 'education' %}formaci√≥n acad√©mica
            {% elif section == 'courses' %}cursos y certificaciones
            {% elif section == 'otros' %}informaci√≥n adicional
            {% else %}{{ section }}
            {% endif %}
        </p>
    </div>
    <div style="padding: 40px;">
        <div style="margin-bottom: 30px;">
            <a href="{{ url_for('add_item', section=section) }}" class="btn btn-success">‚ûï A√±adir 
                {% if section == 'skills' %}Habilidad
                {% elif section == 'experience' %}Experiencia
                {% elif section == 'projects' %}Proyecto
                {% elif section == 'education' %}Formaci√≥n
                {% elif section == 'courses' %}Curso
                {% elif section == 'otros' %}Elemento
                {% else %}{{ title }}
                {% endif %}
            </a>
        </div>
        {% for index, item in items %}
        <div class="card" style="margin-bottom: 20px;">
            <!-- T√≠tulo seg√∫n secci√≥n -->
            <h3>
                {% if section == 'skills' %}
                    {{ item.name or 'Sin nombre' }}
                {% elif section in ['experience', 'projects'] %}
                    {{ item.title or 'Sin t√≠tulo' }}
                {% elif section == 'education' %}
                    {{ item.degree or 'Sin t√≠tulo' }}
                {% elif section == 'courses' %}
                    {{ item.name or 'Sin nombre' }}
                {% elif section == 'otros' %}
                    {{ item.title or 'Sin t√≠tulo' }}
                {% else %}
                    {{ item.name or item.title or 'Sin t√≠tulo' }}
                {% endif %}
            </h3>
            
            <!-- Subt√≠tulo seg√∫n secci√≥n -->
            <p style="color: #666; margin-top: 8px;">
                {% if section == 'skills' %}
                    {% if item.level %}Nivel: {{ item.level }}{% endif %}
                {% elif section in ['experience', 'projects'] %}
                    {{ item.company or '' }}
                    {% if item.location %} - {{ item.location }}{% endif %}
                    {% if item.start or item.end %}
                    <br><small style="color: #888;">
                        {{ item.start or '' }}{% if item.start and item.end %} - {% endif %}{{ item.end or '' }}
                    </small>
                    {% endif %}
                {% elif section == 'education' %}
                    {{ item.institution or '' }}
                    {% if item.start or item.end %}
                    <br><small style="color: #888;">
                        {{ item.start or '' }}{% if item.start and item.end %} - {% endif %}{{ item.end or '' }}
                    </small>
                    {% endif %}
                {% elif section == 'courses' %}
                    {{ item.issuer or '' }}
                    {% if item.date %}
                    <br><small style="color: #888;">{{ item.date }}</small>
                    {% endif %}
                {% elif section == 'otros' %}
                    {{ item.institution or '' }}
                    {% if item.periodo %}
                    <br><small style="color: #888;">{{ item.periodo }}</small>
                    {% endif %}
                {% endif %}
            </p>
            
            <!-- Descripci√≥n corta si existe -->
            {% if item.description and item.description|length > 100 %}
            <p style="margin-top: 10px; color: #555; font-size: 0.9em;">
                {{ item.description[:100] }}...
            </p>
            {% elif item.description %}
            <p style="margin-top: 10px; color: #555; font-size: 0.9em;">
                {{ item.description }}
            </p>
            {% endif %}
            
            <div style="margin-top: 15px;">
                <a href="{{ url_for('edit_item', section=section, idx=index) }}" class="btn btn-secondary">‚úèÔ∏è Editar</a>
                <a href="{{ url_for('delete_item', section=section, idx=index) }}" class="btn btn-danger" 
                   onclick="return confirm('¬øEst√° seguro de que desea eliminar este elemento?')">üóëÔ∏è Eliminar</a>
            </div>
        </div>
        {% endfor %}
        {% if not items %}
        <div style="text-align: center; padding: 40px; color: #6c757d;">
            <p>No hay 
                {% if section == 'skills' %}habilidades configuradas
                {% elif section == 'experience' %}experiencias configuradas
                {% elif section == 'projects' %}proyectos configurados
                {% elif section == 'education' %}formaci√≥n configurada
                {% elif section == 'courses' %}cursos configurados
                {% elif section == 'otros' %}elementos configurados
                {% else %}{{ section }} configurados
                {% endif %}
            </p>
            <a href="{{ url_for('add_item', section=section) }}" class="btn btn-primary">‚ûï A√±adir el primero</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}